<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sri Lanka Ports Authority - Shipping Directory</title>
    <link rel="icon" type="image/x-icon" href="https://www.slpa.lk//favicon.ico" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <style>
          .accordion-button {
            font-size: 3rem; /* Increase accordion title font size */
            font-weight: bold;  /* Make the title bold (optional) */
        }
        <?php include 'css/index.css'; ?>
    </style>
</head>

<body>
<?php include 'headerr.php'; ?>
<section class="inner-banner">
    <div class="thm-container">
        <h2>Shipping Directory</h2>
        <ul class="breadcumb">
            <li><a href="https://www.slpa.lk/"><i class="fa fa-home"></i> Home</a></li>
                            <li><span>Contacts </span></li>
                            <li><span>Shipping Directory </span></li>
            
        </ul>
    </div>
</section>


<section class="sec-padding single-service-page">
    <div class="thm-container">
        <div class="row">
            <div class="col-md-4 pull-left">

    <script type="text/javascript">

        function submit_search() {
            var red = js_base_url + 'port-search';
            var terms = $('#terms').val();

            if (terms != '') {
                $.redirect(red, {'terms': terms});
            } else {
            }




        }
    </script>
    <style>
        .treadmill-date_{
            //background: #1FB5C7;
            background: #FBB12F;
            padding: 10px 10px;
            font-size: 16px;
            //color: #ffffff;
            color: #000000;
            font-family: 'Open Sans', sans-serif;
            //font-weight: bold;
        }       
    </style>
            <div class="single-sidebar-widget hidden-md hidden-sm hidden-xs">
            <div class="special-links">
                <ul>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/ministry">Ministry</a></li>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/chairman-directors">Chairman & Directors</a></li>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/management-team">Management Team</a></li>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/mahapola">Mahapola Academy</a></li>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/help-desk">Help Desk</a></li>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/slpa-ports">SLPA Ports</a></li>
                    
                        <li  class="active" ><a    href="https://www.slpa.lk/port-colombo/shipping-directory">Shipping Directory</a></li>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/isps-slpa">ISPS</a></li>
                    
                        <li ><a    href="https://www.slpa.lk/port-colombo/educational-visits">Educational Visits</a></li>
                                    </ul>
            </div>
        </div>


        <div class="single-sidebar-widget hidden-md hidden-sm hidden-xs">
            <div class="search-box">
                <form role="search" name="search_form" id="search_form" action="#"  onsubmit="event.preventDefault();  return submit_search();">
                    <input type="text" placeholder="Enter Search Keywords" name="terms" id="terms" >
                    <button type="submit" id="submit"><i class="icon icon-Search" ></i></button>
                </form>
            </div>
        </div>
        <div class="single-sidebar-widget hidden-md hidden-sm hidden-xs">
            <div class="sec-title">
                <h2><span>Berthing Programme</span></h2>
            </div>
            <div class="special-links">
                <div class="col-md-12 col-sm-12 col-xs-12 " style="margin-top: 10px; background-color: #EFEFEF !important; ">

                    <div class="treadmill-unit">
                        <div class="treadmill-date" style="padding-left: 10px;"><strong>Vessel</strong> </div>
                        <div class="treadmill-date-r"><strong>ETA</strong></div></div>
                    <div id="mytreadmill" class="treadmill">

                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> MSC MARGRIT  </div>
                                <div class="treadmill-date-r"> 0400 16/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> ESM CREMONA  </div>
                                <div class="treadmill-date-r"> 1200 16/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> MSC MARS  </div>
                                <div class="treadmill-date-r"> 0500 17/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> EVER DIVINE  </div>
                                <div class="treadmill-date-r"> 0600 17/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> CRETE I  </div>
                                <div class="treadmill-date-r"> 0600 18/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> MSC KERRY  </div>
                                <div class="treadmill-date-r"> 0900 18/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> SIMA GISELLE  </div>
                                <div class="treadmill-date-r"> 1300 18/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                            <div class="treadmill-unit">
                                <div class="treadmill-date"> MSC YASHI B  </div>
                                <div class="treadmill-date-r"> 0500 19/01</div>


                                <hr style="height: 3px;">
                            </div>
                        

                    </div>
                    <div class="col-md-12"><a target="_blank" class="sch_more" href="http://www.slpa.lk/berthing-programme/"> More Detail
                            >></a></div>

                </div>
            </div>
        </div>
    



    <!--<div class="single-sidebar-widget" style="margin-top: 15px;">
        <div class="sec-title">
            <h2><span>Download brochure</span></h2>
        </div>
        <div class="dwnld-broucher">
            <img src="application_resources/images/dwnld-broucher.png" alt="Awesome Image"/>
            <a href="#">download as pdf &nbsp;&nbsp;<i class="fa fa-long-arrow-right"></i></a>
        </div>
    </div>-->


</div>


<script type="text/javascript">

    function timeConverter(UNIX_timestamp) {
        //var a = new Date(UNIX_timestamp * 1000);
        var a = new Date(UNIX_timestamp);
        var n = UNIX_timestamp.length;
        var time;
        if (n > 15) {
            //var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];

            var year = a.getFullYear();
            var month = months[a.getMonth()];
            var date = a.getDate();
            var hour = a.getHours();
            var min = a.getMinutes();
            var sec = a.getSeconds();
            min = min < 10 ? '0' + min : min;
            hour = hour < 10 ? '0' + hour : hour;
            time = hour +''+ min + ' ' + date + '/' + month;
        } else {
            time = UNIX_timestamp;
        }
        return time;
    }

$(document).ready(function () {

        $.ajax({
            url: 'https://www.slpa.lk/berthing-programme/mobile_api/get_all_schedule',
            type: 'GET',
            async: false,
            dataType: 'json',
            success: function (data) {
                //$('#dynamic_category').html(data);
                //$('#category_id').focus();
                var berth_info = data;
                var tmp_str = '';
                //  alert('Data: ' + JSON.stringify(data));
                // alert(JSON.stringify(berth_info[0]));
                $.each(berth_info, function (index, value) {
                    tmp_str += '<div class="treadmill-unit">';
                    tmp_str += '<div class="treadmill-date">' + value['vName'] + '</div>';
                    tmp_str += '<div class="treadmill-date-r">' + timeConverter(value['dEta']) + '</div>';

                    tmp_str += '<hr style="height: 3px;">';
                    tmp_str += '</div>';
                    //alert(index + ": " + value);
                });
//console.log(tmp_str);
                $('#mytreadmill').html(tmp_str);
                        iOS = false, p = navigator.platform;
                        if (p === 'iPad' || p === 'iPhone' || p === 'iPod') {
                            iOS = true;
                        }                        
                        if (iOS === true) {
                            $('.treadmill-date-r').html('');
                        }
                $('#mytreadmill').startTreadmill({
                    runAfterPageload: true,
                    direction: "up",
                    speed: "medium",
                    viewable: 8,
                    pause: false
                });
            },
            error: function (request, error) {
                // $('#program_id_error').html("Please try again");
                //alert("Request: " + JSON.stringify(request));
            }
        }); 


});

</script>
 <div class="col-md-8  pull-right"><!--  <div class="image-box clearfix">
                    <img src="application_resources/images/services/single-service-1.jpg" alt="Awesome Image"/>
                    <img src="application_resources/images/services/single-service-2.jpg" alt="Awesome Image" class="pull-right" />
                </div>-->

                <div class="sec-title">
                    <h2><span> SHIPPING DIRECTORY</span></h2>                    <p> </p>


                    <p> </p>
                </div>
                <?php
// Database connection
$conn = new mysqli('localhost', 'root', '', 'shippingdirectorydb');

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Query to get the data from the table
$sql = "SELECT companyname, name, address, email, tell, fax, website, homeaddress, linkname, link, categoryName FROM form_responses ORDER BY categoryName";
$result = $conn->query($sql);

if ($result->num_rows > 0) {
    // Group entries by category name
    $categories = array();
    while ($row = $result->fetch_assoc()) {
        $categories[$row['categoryName']][] = $row;  // Group entries under their respective category
    }

    echo '<div class="accordion" id="companyAccordion">';  
    $index = 0;  // To keep a unique ID for each accordion item

    foreach ($categories as $categoryName => $companies) {
        echo '<div class="accordion-item">';
        echo '<h2 class="accordion-header" id="heading'.$index.'">';
        echo '<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse'.$index.'" aria-expanded="true" aria-controls="collapse'.$index.'">';
        echo $categoryName; 
        echo '</button></h2>';

        echo '<div id="collapse'.$index.'" class="accordion-collapse collapse" aria-labelledby="heading'.$index.'" data-bs-parent="#companyAccordion">';
        echo '<div class="accordion-body">';
        foreach ($companies as $company) {
            // Display only non-empty fields
            if (!empty($company["companyname"])) {
                echo '<strong>Company Name:</strong> ' . $company["companyname"] . '<br>';
            }
            if (!empty($company["name"])) {
                echo '<strong>Name:</strong> ' . $company["name"] . '<br>';
            }
            if (!empty($company["address"])) {
                echo '<strong>Address:</strong> ' . $company["address"] . '<br>';
            }
            if (!empty($company["email"])) {
                echo '<strong>Email:</strong> ' . $company["email"] . '<br>';
            }
            if (!empty($company["tell"])) {
                echo '<strong>Phone:</strong> ' . $company["tell"] . '<br>';
            }
            if (!empty($company["fax"])) {
                echo '<strong>Fax:</strong> ' . $company["fax"] . '<br>';
            }
            if (!empty($company["website"])) {
                echo '<strong>Website:</strong> <a href="' . $company["website"] . '" target="_blank">' . $company["website"] . '</a><br>';
            }
            if (!empty($company["homeaddress"])) {
                echo '<strong>Home Address:</strong> ' . $company["homeaddress"] . '<br>';
            }
            if (!empty($company["linkname"]) && !empty($company["link"])) {
                echo '<strong>Link Name:</strong> ' . $company["linkname"] . '<br>';
                echo '<strong>Link URL:</strong> <a href="' . $company["link"] . '">' . $company["linkname"] . '</a><br>';
            }
            
            echo '<hr>';  
        }

        echo '</div></div></div>';  

        $index++;  
    }

    echo '</div>';  
} else {
    echo "No results found!";
}

// Close the database connection
$conn->close();
?>

</div>
</div>
            
        </div>
    </section>

    <!-- Footer -->
    <div>
        <?php include 'footer.php'; ?>
    </div>
</body>
</html>

